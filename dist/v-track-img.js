!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("VTrackImg",[],e):"object"==typeof exports?exports.VTrackImg=e():t.VTrackImg=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=2)}([function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Object.values(t),Object.keys(t)]}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=void 0;return function(){for(var r=this,i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout(function(){return t.apply(r,o)},e)}}function o(t,e){var n=Object.keys(t);return n.length===e.length&&e.every(function(t){return n.includes(t)})}function a(t,e){var n=Object.keys(t);return e.some(function(t){return n.includes(t)})}function c(t,e){return t.key===e.key&&t.tag===e.tag&&t.isComment===e.isComment&&f(t.data)===f(e.data)}function u(t,e){if(!c(t,e))return!1;var n=e.children,r=t.children;if(s(t.text)&&f(n)&&f(r)){if(n.length!==r.length)return!1;for(var i=0;i<r.length;i++){var o=r[i];if(f(o)&&f(n[i]))return u(o,n[i])}}else if(t.text!==e.text)return!1;return!0}n.d(e,"e",function(){return l}),e.f=r,e.c=i,e.a=o,e.b=a,e.d=u;var l=function(t){return"function"==typeof t||!1},s=function(t){return void 0===t||null===t},f=function(t){return void 0!==t&&null!==t}},function(t,e,n){"use strict";function r(t,e){return window.getComputedStyle(t).getPropertyValue(e)}function i(t,e){return!(!t||t.width<=0||t.height<=0)&&(t.bottom>0&&t.right>0&&t.top<window.innerHeight&&t.left<window.innerWidth&&!(t.left>e.right||t.top>e.bottom||t.right<e.left||t.bottom<e.top))}function o(t){if(t===window.document)return!0;if(!t||!t.parentNode)return!1;var e=t.parentNode,n=r(t,"visibility"),i=r(t,"display");return"hidden"!==n&&"none"!==i&&(!e||o(e))}n.d(e,"a",function(){return a}),e.b=i,e.c=o;var a=function(t){return t&&1===t.nodeType}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(6),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(){r(this,t),this.installed=!1}return c(t,null,[{key:"install",value:function(t,e){var n=this,r=e.trackEvents,c=e.trackEnable,u=void 0===c?{}:c,l=e.trackBaseConfig,s=void 0===l?{}:l;u=a({UVPV:!1,TONP:!1},u),s!={}&&Object(o.b)(s),window.trackAction=o.a;var f=function(t,e){u.TONP&&r.TONP(t,{et:e,dt:Date.now()})};this.installed||(this.installed=!0,t.directive("track",{bind:function(){for(var t,e=arguments.length,o=Array(e),a=0;a<e;a++)o[a]=arguments[a];return(t=i.a).call.apply(t,[n].concat(o,[r]))},componentUpdated:function(){for(var t,e=arguments.length,o=Array(e),a=0;a<e;a++)o[a]=arguments[a];return(t=i.c).call.apply(t,[n].concat(o,[r]))},unbind:function(){for(var t,e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=i.b).call.apply(t,[n].concat(r))}}),t.component("TrackView",{render:function(t){return t("span",{style:"display: none"})}}),t.mixin({data:function(){return{PAGE_ENTER_TIME:Date.now()}},created:function(){var t=this;window.onbeforeunload=function(){return f(t,t.PAGE_ENTER_TIME)}},beforeRouteEnter:function(t,e,n){n(function(t){t.$vnode.key&&u.UVPV&&r.UVPV(t)})},beforeRouteUpdate:function(t,e,n){var i=this;this.$watch("$route",function(){u.UVPV&&"routeUpdate"===u.UVPV&&r.UVPV(i)}),n()},beforeRouteLeave:function(t,e,n){f(this,this.PAGE_ENTER_TIME),n()}}))}}]),t}();e.default=u},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};t.$unwatch=r.$watch(function(){return r[e]},function(e,r){e!==r&&(o.immediate||t.contains(i.target))&&n(),i.target=null})}function a(t,e,n,a,c,u){var y=e.value,g=e.arg,b=e.modifiers,m=e.rawName,w=n.context,x=n.componentInstance,O=this;if(!u[g])throw new Error("tracking event does not exist");var j=[],$=u[g].bind(null,w),k=function(e,n,r){return o.call(O,t,e,n,w,r)},T=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.a.call(null,b,e)},E=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.b.call(null,b,e)};if(Object.keys(b).length)if(T("watch")){var P=Object.keys(y).shift();k(P,$,{immediate:!0})}else if(T("delay"))t.$timer&&clearTimeout(t.$timer),t.$timer=setTimeout(function(){u[g](w)},y);else if(T("watch","delay")){var S=y.delay,I=i(y,["delay"]),V=[].concat(r(Object.keys(I))).pop();$=function(){t.$timer&&clearTimeout(t.$timer),t.$timer=setTimeout(function(){Object(f.c)(w.$el)&&u[g](w)},S)},k(V,$,{immediate:!0})}else if(E("show")){var A,_=Object(l.f)(y),M=v(_,1),U=M[0],C=(A=u[g]).bind.apply(A,[null,w].concat(r(U))),L=E("once"),N=E("custom");t.$visMonitor||setTimeout(function(){var e=new h.a(t,N&&w.$refs[y.ref],y&&w.$refs[y.viewport],y&&y.percent);(L?e.$once:e.$on).call(e,"fullyvisible",C),t.$visMonitor=e},0)}else if(!x&&b.click||x&&E("native")){switch(void 0===y?"undefined":d(y)){case"object":var W,R=Object(l.f)(y),D=v(R,2),H=D[0],Q=D[1],B=H.shift(),G=[].concat(r(Q)).pop();s.a(B),$=(W=u[g]).bind.apply(W,[null,w].concat(r(H))),j=[$,B.bind.apply(B,[null].concat(r(H)))],b.delay&&j.reverse(),b.async&&k(G,j.shift());break;case"function":j=[$,y],b.delay&&j.reverse()}t.$listener=function(t){O.target=t.target,j.forEach(function(e){return e(t)})},t.addEventListener("click",t.$listener)}else{if(!x||x.$el!==t)throw new Error(m+" directive is not supported");var z=void 0,F=void 0,J=void 0,q=void 0,K=Object.keys(b).filter(function(t){return!p.includes(t)}).pop();if("object"===(void 0===y?"undefined":d(y))){var X=Object(l.f)(y),Y=v(X,2);z=Y[0],F=Y[1],J=z.shift(),q=[].concat(r(F)).pop(),s.a(J)}if(t["$on_"+K])return;x.$on(K,function(){for(var e,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];O.target=t,$=(e=u[g]).bind.apply(e,[null,w].concat(i)),j=[$,(n=J||y).bind.apply(n,[null].concat(i))],b.delay&&j.reverse(),b.async&&k(q,j.shift()),j.forEach(function(t){return t()}),t["$on_"+K]=!0})}else u[g](w,y)}function c(t){if(t.$listener){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];Object(l.d)(n[1],n[2])||(u.call(this,t),a.call.apply(a,[this,t].concat(n)))}}function u(t){t.$listener&&t.removeEventListener("click",t.$listener),t.$timer&&clearTimeout(t.$timer),t.$unwatch&&t.$unwatch(),t.$visMonitor&&t.$visMonitor.destroy()}e.a=a,e.c=c,e.b=u;var l=n(0),s=n(4),f=n(1),h=n(5),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=["async","delay","watch","show","once","custom"]},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),i=function(t){if(!Object(r.e)(t))throw new Error("The first parameter should be Function.")}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(1),o=n(0),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(r(this,t),!Object(i.a)(e))throw new Error("not an element node");if(a>1&&a<=0)throw new Error("'percent' must be a number between 0 and 1");this.ele=e,this.ref=n,this.refWin=o,this.started=!1,this.percent=a,this.prevPerc=null,this.listeners={},this.removeScrollLisener=null,this.init()}return a(t,[{key:"init",value:function(){var t=this;if(!this.started){var e=Object(o.c)(this.visibilitychange.bind(this));e(),this.removeScrollLisener=function(e){return t.ref?t.ref.$on("scroll",e):(t.refWin.addEventListener("scroll",e,!0),function(){return t.refWin.removeEventListener("scroll",e,!0)})}(e),this.started=!0}}},{key:"viewport",value:function(){var t=this.refWin,e=Object(i.a)(t)?t.getBoundingClientRect():t;return{top:Object(i.a)(t)?e.top:0,right:e.right||e.innerWidth,bottom:e.bottom||e.innerHeight,left:e.left||0,height:t.innerHeight||t.offsetHeight,width:t.innerWidth||t.offsetWidth}}},{key:"$on",value:function(t,e){return(this.listeners[t]||(this.listeners[t]=[])).push(e),this}},{key:"$off",value:function(t,e){if(e){for(var n=this.listeners[t],r=void 0,i=n.length;i--;)if((r=n[i])===e||r.cbk===e){n.splice(i,1);break}return this}}},{key:"$once",value:function(t,e){var n=this,r=function r(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];n.$off(t,r),e.apply(n,o)};return r.cbk=e,this.$on(t,r),this}},{key:"$emit",value:function(t){for(var e=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(this.listeners[t]||[]).forEach(function(t){return t.apply(e,r)}),this}},{key:"visibilitychange",value:function(){var t=this.ele.getBoundingClientRect(),e=this.viewport();if(!Object(i.b)(t,e)||!Object(i.c)(this.ele))return this.prevPerc=0,0;var n=0,r=0,o=0;e.top<0&&(e.top=0),e.bottom>window.innerHeight&&(e.bottom=window.innerHeight),e.left<0&&(e.left=0),e.right>window.innerWidth&&(e.right=window.innerWidth),n=t.top>=e.top&&t.bottom>e.bottom?e.bottom-t.top:t.top<e.top&&t.bottom<=e.bottom?t.bottom-e.top:t.height,r=t.left>=e.left&&t.right>e.right?e.right-t.left:t.left<e.left&&t.right<=e.right?t.right-e.left:t.width,o=n*r/(t.height*t.width),this.prevPerc<this.percent&&o>=this.percent&&(this.$emit("fullyvisible"),this.prevPerc=o)}},{key:"destroy",value:function(){Object(o.e)(this.removeScrollLisener)&&this.removeScrollLisener()}}]),t}();e.a=c},function(t,e,n){"use strict";function r(t){u=t}function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";null==localStorage.getItem("guid")&&localStorage.setItem("guid",o.a.guid());var l={action:"",channel:u.channel,page:e,clickOperate:n,params:c({},r),ts:(new Date).getTime(),uuid:localStorage.getItem("guid"),uid:i,znsr:u.channel},s=o.a.getQueryVariable(e,"channelcode");if(s&&""!=s&&(l.channel=s),"1"===t||"4"===t)if(l.action="pageView",null==localStorage.getItem("sessionTime"))localStorage.setItem("sessionTime",(new Date).getTime()),localStorage.setItem("sessionId",o.a.sessionid());else{var f=localStorage.getItem("sessionTime"),h=(new Date).getTime(),d=parseInt(Math.abs(h-f)/1e3/60);d>10&&(localStorage.setItem("sessionTime",(new Date).getTime()),localStorage.setItem("sessionId",o.a.sessionid()))}"3"===t&&(l.action="clickView"),l.sessionId=localStorage.getItem("sessionId"),-1!=u.whiteList.indexOf(l.page)&&"4"!=t||Object(a.a)(u.url+"?"+o.a.toQueryString(l))}e.b=r,e.a=i;var o=n(7),a=n(8),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u={url:"",channel:"",whiteList:[]}},function(t,e,n){"use strict";e.a={isPlainObject:function(t){if(!t||"[object Object]"!=={}.toString.call(t))return!1;var e=Object.getPrototypeOf(t);if(!e)return!0;var n={}.hasOwnProperty,r=n.toString,i=r.call(Object),o={}.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof o&&r.call(o)===i},toQueryString:function(t){var e=[];for(var n in t){var r=t[n];this.isPlainObject(r)&&(r=JSON.stringify(r)),e.push(n+"="+encodeURIComponent(r))}return e.join("&")},getQueryVariable:function(t,e){for(var n=t.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]==e)return i[1]}return!1},guid:function(){return"xxxxxxxxxxxxxxxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}).toUpperCase()},sessionid:function(){return"xxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}).toUpperCase()}}},function(t,e,n){"use strict";e.a=function(t){var e=window,n="____dj"+Math.random(),r=e[n]=new Image;r.onload=r.onerror=function(){e[n]=null},r.src=t}}])});
//# sourceMappingURL=v-track-img.js.map